{"ast":null,"code":"import React from'react';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Preview(){const{id,url}=useParams();const decodedUrl=decodeURIComponent(url);const navigate=useNavigate();console.log('Previewing file from URL:',decodedUrl);// Debugging: Log the decoded URL\nconsole.log('Document ID:',id);// Debugging: Log the document ID\nconst handleDownload=()=>{fetch(decodedUrl,{method:'GET',headers:{'Content-Type':'application/octet-stream'}}).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}return response.blob();}).then(blob=>{const downloadUrl=window.URL.createObjectURL(blob);const a=document.createElement('a');a.style.display='none';a.href=downloadUrl;a.download=decodedUrl.split('/').pop();document.body.appendChild(a);a.click();window.URL.revokeObjectURL(downloadUrl);}).catch(err=>console.error('Error downloading the file:',err));};const handleDelete=()=>{console.log('Deleting document with ID:',id);// Debugging: Log the document ID\nfetch(\"http://127.0.0.1:8000/api/documents/\".concat(id,\"/\"),{method:'DELETE'}).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}navigate('/');// Redirect to the documents list after deletion\n}).catch(err=>console.error('Error deleting the file:',err));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Preview\"}),decodedUrl.endsWith('.pdf')?/*#__PURE__*/_jsx(\"embed\",{src:decodedUrl,width:\"600\",height:\"500\",type:\"application/pdf\"}):/*#__PURE__*/_jsx(\"img\",{src:decodedUrl,alt:\"Preview\",width:\"600\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDownload,children:\"Download\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"Delete\"})]});}export default Preview;","map":{"version":3,"names":["React","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","Preview","id","url","decodedUrl","decodeURIComponent","navigate","console","log","handleDownload","fetch","method","headers","then","response","ok","Error","blob","downloadUrl","window","URL","createObjectURL","a","document","createElement","style","display","href","download","split","pop","body","appendChild","click","revokeObjectURL","catch","err","error","handleDelete","concat","children","endsWith","src","width","height","type","alt","onClick"],"sources":["C:/Users/HermanK/Documents/NasaHunch/Bit-Store-Nasa-Hunch/frontend/filehandling-frontend/src/Preview.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nfunction Preview() {\r\n  const { id, url } = useParams();\r\n  const decodedUrl = decodeURIComponent(url);\r\n  const navigate = useNavigate();\r\n\r\n  console.log('Previewing file from URL:', decodedUrl); // Debugging: Log the decoded URL\r\n  console.log('Document ID:', id); // Debugging: Log the document ID\r\n\r\n  const handleDownload = () => {\r\n    fetch(decodedUrl, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/octet-stream',\r\n      },\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n        return response.blob();\r\n      })\r\n      .then(blob => {\r\n        const downloadUrl = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.style.display = 'none';\r\n        a.href = downloadUrl;\r\n        a.download = decodedUrl.split('/').pop();\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        window.URL.revokeObjectURL(downloadUrl);\r\n      })\r\n      .catch(err => console.error('Error downloading the file:', err));\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    console.log('Deleting document with ID:', id); // Debugging: Log the document ID\r\n    fetch(`http://127.0.0.1:8000/api/documents/${id}/`, {\r\n      method: 'DELETE',\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n        navigate('/'); // Redirect to the documents list after deletion\r\n      })\r\n      .catch(err => console.error('Error deleting the file:', err));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Preview</h1>\r\n      {decodedUrl.endsWith('.pdf') ? (\r\n        <embed src={decodedUrl} width=\"600\" height=\"500\" type=\"application/pdf\" />\r\n      ) : (\r\n        <img src={decodedUrl} alt=\"Preview\" width=\"600\" />\r\n      )}\r\n      <button onClick={handleDownload}>Download</button>\r\n      <button onClick={handleDelete}>Delete</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Preview;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}