{"ast":null,"code":"import _objectSpread from\"C:/Users/HermanK/Documents/NasaHunch/Bit-Store-Nasa-Hunch/frontend/filehandling-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useAuth}from'./contexts/authContext';import{db}from'./firebase/firebase';// Import Firestore\nimport{collection,query,where,getDocs,updateDoc,doc,arrayUnion}from'firebase/firestore';// Import Firestore functions\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Invitations(){const{currentUser}=useAuth();const[invitations,setInvitations]=useState([]);const[message,setMessage]=useState('');useEffect(()=>{const fetchInvitations=async()=>{if(currentUser){const q=query(collection(db,'invitations'),where('email','==',currentUser.email),where('status','==','pending'));const querySnapshot=await getDocs(q);const fetchedInvitations=querySnapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setInvitations(fetchedInvitations);}};fetchInvitations();},[currentUser]);const acceptInvitation=async(invitationId,projectId)=>{try{const invitationRef=doc(db,'invitations',invitationId);const projectRef=doc(db,'projects',projectId);// Update the invitation status\nawait updateDoc(invitationRef,{status:'accepted'});// Add the user to the project's members\nawait updateDoc(projectRef,{members:arrayUnion(currentUser.email)});setMessage('Invitation accepted');setInvitations(invitations.filter(invitation=>invitation.id!==invitationId));}catch(error){setMessage(\"Failed to accept invitation: \".concat(error.message));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Invitations\"}),invitations.length>0?/*#__PURE__*/_jsx(\"ul\",{children:invitations.map(invitation=>/*#__PURE__*/_jsxs(\"li\",{children:[\"Project ID: \",invitation.projectId,\" - Invited by \",invitation.invitedBy,/*#__PURE__*/_jsx(\"button\",{onClick:()=>acceptInvitation(invitation.id,invitation.projectId),children:\"Accept\"})]},invitation.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No pending invitations\"}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]});}export default Invitations;","map":{"version":3,"names":["React","useEffect","useState","useAuth","db","collection","query","where","getDocs","updateDoc","doc","arrayUnion","jsx","_jsx","jsxs","_jsxs","Invitations","currentUser","invitations","setInvitations","message","setMessage","fetchInvitations","q","email","querySnapshot","fetchedInvitations","docs","map","_objectSpread","id","data","acceptInvitation","invitationId","projectId","invitationRef","projectRef","status","members","filter","invitation","error","concat","children","length","invitedBy","onClick"],"sources":["C:/Users/HermanK/Documents/NasaHunch/Bit-Store-Nasa-Hunch/frontend/filehandling-frontend/src/Invitations.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from './contexts/authContext';\r\nimport { db } from './firebase/firebase'; // Import Firestore\r\nimport { collection, query, where, getDocs, updateDoc, doc, arrayUnion } from 'firebase/firestore'; // Import Firestore functions\r\n\r\nfunction Invitations() {\r\n  const { currentUser } = useAuth();\r\n  const [invitations, setInvitations] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchInvitations = async () => {\r\n      if (currentUser) {\r\n        const q = query(collection(db, 'invitations'), where('email', '==', currentUser.email), where('status', '==', 'pending'));\r\n        const querySnapshot = await getDocs(q);\r\n        const fetchedInvitations = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n        setInvitations(fetchedInvitations);\r\n      }\r\n    };\r\n\r\n    fetchInvitations();\r\n  }, [currentUser]);\r\n\r\n  const acceptInvitation = async (invitationId, projectId) => {\r\n    try {\r\n      const invitationRef = doc(db, 'invitations', invitationId);\r\n      const projectRef = doc(db, 'projects', projectId);\r\n\r\n      // Update the invitation status\r\n      await updateDoc(invitationRef, { status: 'accepted' });\r\n\r\n      // Add the user to the project's members\r\n      await updateDoc(projectRef, {\r\n        members: arrayUnion(currentUser.email)\r\n      });\r\n\r\n      setMessage('Invitation accepted');\r\n      setInvitations(invitations.filter(invitation => invitation.id !== invitationId));\r\n    } catch (error) {\r\n      setMessage(`Failed to accept invitation: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Invitations</h2>\r\n      {invitations.length > 0 ? (\r\n        <ul>\r\n          {invitations.map(invitation => (\r\n            <li key={invitation.id}>\r\n              Project ID: {invitation.projectId} - Invited by {invitation.invitedBy}\r\n              <button onClick={() => acceptInvitation(invitation.id, invitation.projectId)}>Accept</button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>No pending invitations</p>\r\n      )}\r\n      {message && <p>{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Invitations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}