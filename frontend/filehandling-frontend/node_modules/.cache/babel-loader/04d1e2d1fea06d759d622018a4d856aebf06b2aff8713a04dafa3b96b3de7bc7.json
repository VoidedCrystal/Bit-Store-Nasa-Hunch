{"ast":null,"code":"import React,{useState}from'react';import{useAuth}from'./contexts/authContext';import{Link,Navigate}from'react-router-dom';import{db}from'./firebase/firebase';// Import Firestore\nimport{doc,getDoc,setDoc}from'firebase/firestore';// Import Firestore functions\nimport'./css/auth.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(){const{signup,currentUser,signInWithGoogle}=useAuth();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[username,setUsername]=useState('');const[isSigningUp,setIsSigningUp]=useState(false);const[errorMessage,setErrorMessage]=useState('');const[isGoogleSignIn,setIsGoogleSignIn]=useState(false);const onSubmit=async e=>{e.preventDefault();setIsSigningUp(true);try{await signup(email,password,username);}catch(error){setErrorMessage(error.message);setIsSigningUp(false);}};const handleGoogleSignIn=async()=>{setIsGoogleSignIn(true);try{const userCredential=await signInWithGoogle();const user=userCredential.user;const userDoc=await getDoc(doc(db,'users',user.uid));if(!userDoc.exists()){// Prompt for username if not set\nsetIsGoogleSignIn(false);setIsSigningUp(true);}else{setIsGoogleSignIn(false);}}catch(error){setErrorMessage(error.message);setIsGoogleSignIn(false);}};const handleUsernameSubmit=async e=>{e.preventDefault();setIsSigningUp(true);try{const user=currentUser;await setDoc(doc(db,'users',user.uid),{username,email:user.email});setIsSigningUp(false);}catch(error){setErrorMessage(error.message);setIsSigningUp(false);}};if(currentUser&&!isSigningUp){return/*#__PURE__*/_jsx(Navigate,{to:\"/Home\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"../assets/bitsore3.png\",height:\"90px\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Authbox\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up for Bit-Store\"}),!isSigningUp&&!isGoogleSignIn&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Username\",children:\"Username\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",children:\"Password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"submit\",type:\"submit\",name:\"Signup\",value:\"Sign Up\",disabled:isSigningUp})]}),isGoogleSignIn&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Signing in with Google...\"})}),isSigningUp&&!isGoogleSignIn&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUsernameSubmit,children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Username\",children:\"Set Username\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"submit\",type:\"submit\",name:\"SetUsername\",value:\"Set Username\",disabled:isSigningUp})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{children:errorMessage}),!isSigningUp&&!isGoogleSignIn&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleGoogleSignIn,disabled:isSigningUp,className:\"Google\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"../assets/GoogleLogo.png\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"Google\",children:\"Sign in with Google\"})]})]}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"linkbox\",children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/Login\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Login\"})})]})})]});}export default Signup;","map":{"version":3,"names":["React","useState","useAuth","Link","Navigate","db","doc","getDoc","setDoc","jsx","_jsx","jsxs","_jsxs","Signup","signup","currentUser","signInWithGoogle","email","setEmail","password","setPassword","username","setUsername","isSigningUp","setIsSigningUp","errorMessage","setErrorMessage","isGoogleSignIn","setIsGoogleSignIn","onSubmit","e","preventDefault","error","message","handleGoogleSignIn","userCredential","user","userDoc","uid","exists","handleUsernameSubmit","to","children","src","height","className","htmlFor","type","name","value","onChange","target","required","disabled","onClick"],"sources":["C:/Users/HermanK/Documents/NasaHunch/Bit-Store-Nasa-Hunch/frontend/filehandling-frontend/src/Signup.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from './contexts/authContext';\r\nimport { Link, Navigate } from 'react-router-dom';\r\nimport { db } from './firebase/firebase'; // Import Firestore\r\nimport { doc, getDoc, setDoc } from 'firebase/firestore'; // Import Firestore functions\r\nimport './css/auth.css';\r\n\r\nfunction Signup() {\r\n  const { signup, currentUser, signInWithGoogle } = useAuth();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [isSigningUp, setIsSigningUp] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [isGoogleSignIn, setIsGoogleSignIn] = useState(false);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSigningUp(true);\r\n    try {\r\n      await signup(email, password, username);\r\n    } catch (error) {\r\n      setErrorMessage(error.message);\r\n      setIsSigningUp(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    setIsGoogleSignIn(true);\r\n    try {\r\n      const userCredential = await signInWithGoogle();\r\n      const user = userCredential.user;\r\n      const userDoc = await getDoc(doc(db, 'users', user.uid));\r\n      if (!userDoc.exists()) {\r\n        // Prompt for username if not set\r\n        setIsGoogleSignIn(false);\r\n        setIsSigningUp(true);\r\n      } else {\r\n        setIsGoogleSignIn(false);\r\n      }\r\n    } catch (error) {\r\n      setErrorMessage(error.message);\r\n      setIsGoogleSignIn(false);\r\n    }\r\n  };\r\n\r\n  const handleUsernameSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSigningUp(true);\r\n    try {\r\n      const user = currentUser;\r\n      await setDoc(doc(db, 'users', user.uid), {\r\n        username,\r\n        email: user.email\r\n      });\r\n      setIsSigningUp(false);\r\n    } catch (error) {\r\n      setErrorMessage(error.message);\r\n      setIsSigningUp(false);\r\n    }\r\n  };\r\n\r\n  if (currentUser && !isSigningUp) {\r\n    return <Navigate to=\"/Home\" />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <img src=\"../assets/bitsore3.png\" height=\"90px\"/>\r\n      <div className=\"Authbox\">\r\n        <h2>Sign Up for Bit-Store</h2>\r\n        {!isSigningUp && !isGoogleSignIn && (\r\n          <form onSubmit={onSubmit}>\r\n            <p><label htmlFor=\"Username\">Username</label></p>\r\n            <input\r\n              type=\"text\"\r\n              name=\"Username\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              required\r\n            />\r\n            <p><label htmlFor=\"Email\">Email</label></p>\r\n            <input\r\n              type=\"email\"\r\n              name=\"Email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n            <p><label htmlFor=\"Password\">Password</label></p>\r\n            <input\r\n              type=\"password\"\r\n              name=\"Password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n            <p></p>\r\n            <input className=\"submit\" type=\"submit\" name=\"Signup\" value=\"Sign Up\" disabled={isSigningUp} />\r\n          </form>\r\n        )}\r\n        {isGoogleSignIn && (\r\n          <div>\r\n            <p>Signing in with Google...</p>\r\n          </div>\r\n        )}\r\n        {isSigningUp && !isGoogleSignIn && (\r\n          <form onSubmit={handleUsernameSubmit}>\r\n            <p><label htmlFor=\"Username\">Set Username</label></p>\r\n            <input\r\n              type=\"text\"\r\n              name=\"Username\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              required\r\n            />\r\n            <p></p>\r\n            <input className=\"submit\" type=\"submit\" name=\"SetUsername\" value=\"Set Username\" disabled={isSigningUp} />\r\n          </form>\r\n        )}\r\n        {errorMessage && <p>{errorMessage}</p>}\r\n        {!isSigningUp && !isGoogleSignIn && (\r\n          <button onClick={handleGoogleSignIn} disabled={isSigningUp} className='Google'><div><img src=\"../assets/GoogleLogo.png\"/></div><span className='Google'>Sign in with Google</span></button>\r\n        )}\r\n      </div>\r\n      <p></p>\r\n      <div className=\"linkbox\">\r\n        <h5>Already have an account? <Link to=\"/Login\"><p>Login</p></Link></h5>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Signup;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}